---
import BaseLayout from "@layouts/BaseLayout.astro";
import Hero from "@layouts/Hero.astro";

import Button from "@components/Button.astro";

import { Icon } from "astro-icon";
import HomepageVideos from "@components/HomepageVideos.svelte";
import SnippetBox from "@components/SnippetBox.svelte";

const latestRelease = await fetch(
  "https://api.github.com/repos/ewels/MultiQC/releases/latest"
)
  .then((response) => response.json())
  .then((data) => {
    if (!data.tag_name) {
      console.error("Error: Could not fetch latest release from GitHub API.");
      console.log(data);
    }
    return data.tag_name;
  });
---

<BaseLayout title="MultiQC" subtitle="Homepage">
  <Hero>
    <div class="container-lg relative">
      <div class="row">
        <div class="col-full lg:col-8">
          <div class="lg:flex flex-row items-end items-stretch">
            <Icon name="multiqc_logo_light" class="w-full lg:w-[430px] mb-5" />
            <div class="grow text-right">
              {
                latestRelease && (
                  <a
                    href="https://github.com/ewels/MultiQC/releases"
                    class="typo-small mr-5 text-xs text-gray-300"
                  >
                    Latest release: {latestRelease}
                  </a>
                )
              }

              <div class="mt-4 mr-5 hidden lg:block">
                <span
                  class="__dimensions_badge_embed__ !text-right"
                  data-doi="10.1093/bioinformatics/btw354"
                  data-legend="never"
                  data-style="large_rectangle"></span>
                <script
                  async
                  src="https://badge.dimensions.ai/badge.js"
                  charset="utf-8"
                ></script>
              </div>
            </div>
          </div>
          <h1 class="typo-h4 mt-8">
            Aggregate results from bioinformatics analyses across many samples
            into a single report
          </h1>
          <p class="typo-blockquote mt-4 lg:mt-8">
            MultiQC searches a given directory for analysis logs and compiles a
            HTML report. It's a general use tool, perfect for summarising the
            output from numerous bioinformatics tools.
          </p>
          <div class="">
            <HomepageVideos
              videos={[
                {
                  id: "BbScv9TcaMg",
                  title: "Introduction to MultiQC",
                  language: "en",
                },
                {
                  id: "Gg5neIPuiVo",
                  title: "Installing MultiQC",
                  language: "en",
                },
                {
                  id: "cktKbESOOno",
                  title: "Running MultiQC",
                  language: "en",
                },
                {
                  id: "qPbIlO_KWN0",
                  title: "Using MultiQC Reports",
                  language: "en",
                },
                {
                  id: "WX_qVhJ32g0",
                  title: "Introducción a MultiQC",
                  language: "es",
                },
                {
                  id: "E_NJCxwXAGQ",
                  title: "Instalación de MultiQC",
                  language: "es",
                },
                {
                  id: "0MfW7Y8Ocak",
                  title: "¿Cómo ejecutar MultiQC?",
                  language: "es",
                },
              ]}
              client:idle
            />
          </div>
        </div>
        <div class="col-full lg:col-4 mt-4 lg:mt-0">
          <Button
            to="https://www.github.com/ewels/MultiQC"
            variant="primary"
            size="md"
            classes="w-full"
          >
            <Icon name="mdi:github" class="mr-3 h-6 w-6" />
            GitHub
          </Button>
          <div class="mt-5">
            <Button
              to="https://pypi.org/project/multiqc/"
              variant="primary"
              size="md"
              classes="w-full"
            >
              <Icon name="mdi:language-python" class="mr-3 h-6 w-6" />
              Python Package Index
            </Button>
          </div>
          <div class="mt-5">
            <Button to="/docs/" variant="primary" size="md" classes="w-full">
              <Icon name="mdi:book-open-variant" class="mr-3 h-6 w-6" />
              Documentation
            </Button>
          </div>
          <div class="mt-5">
            <Button to="/modules/" variant="primary" size="md" classes="w-full">
              <Icon name="mdi:hammer-wrench" class="mr-3 h-6 w-6" />
              114 supported tools
            </Button>
          </div>
          <div class="mt-5">
            <Button
              to="/citation/"
              variant="primary"
              size="md"
              classes="w-full"
            >
              <Icon name="mdi:paperclip" class="mr-3 h-6 w-6" />
              Citation
            </Button>
          </div>
          <div class="mt-5">
            <Button
              to="https://gitter.im/ewels/MultiQC"
              variant="primary"
              size="md"
              classes="w-full"
            >
              <Icon name="gg:gitter" class="mr-3 h-6 w-6" />
              Get help on Gitter
            </Button>
          </div>
          <div class="mt-5">
            <div
              class="overflow-hidden rounded-md border border-blue-600 bg-gray-800 shadow"
            >
              <div
                class="flex items-center justify-center border-b border-blue-600 bg-blue-600 py-2"
              >
                <Icon name="mdi:terminal" class="mr-3 h-6 w-6" />
                <span class="typo-intro">Quick install</span>
              </div>

              <SnippetBox
                snippets={[
                  {
                    title: "pip",
                    code: `pip install multiqc # Install\nmultiqc . # Run`,
                  },
                  {
                    title: "conda",
                    code: "conda install multiqc\n # Setup Bioconda first https://bioconda.github.io/#usage\nmultiqc .",
                  },
                  {
                    title: "docker",
                    code: "docker run -t -v pwd:pwd -w pwd\newels/multiqc .",
                  },
                ]}
                client:idle
              />
            </div>
            <p class="mt-2 text-xs font-light text-gray-500">
              Need a little more help?
              <a
                href="/docs/usage/installation/"
                class="underline underline-offset-4 hover:text-gray-400"
              >
                See the full installation instructions
              </a>
              .
            </p>
          </div>
        </div>
      </div>
    </div>
  </Hero>
  <div class="container-lg py-20">
    <div class="row">
      <div class="col-full">
        <h2 class="typo-h3 mb-4">Example reports</h2>
        <p class="typo-blockquote mb-4">
          MultiQC collects numerical stats from each module at the top the
          report, so that you can track how your data behaves as it proceeds
          through your analysis.
        </p>
        <div class="mt-4 md:mt-8">
          <Button to="/example-reports/" variant="primary" size="md" arrow>
            See all example reports
          </Button>
        </div>
        <div class="mt-8 hidden md:block">
          {/* <ExamplesBrowser items={exampleReports} hasDetails /> */}
        </div>
      </div>
    </div>
  </div>
  <div class="container-sm py-20">
    <div class="text-center">
      <h2 class="typo-h3 mx-auto mb-4 max-w-2xl">
        Ever spent ages collecting reports and wading through log file output?
      </h2>
      <p class="typo-blockquote">Here's the answer to your frustrations...</p>
    </div>
    <div class="row">
      <div class="col-full md:col-6 mt-8 md:mt-16">
        <h3 class="typo-h4 mb-4">Visualise statistics from your pipeline</h3>
        <p class="typo-body">
          MultiQC collects numerical stats from each module at the top the
          report, so that you can track how your data behaves as it proceeds
          through your analysis.
        </p>
      </div>
      <div class="col-full md:col-6 mt-8 md:mt-16">
        <h3 class="typo-h4 mb-4">Plot all of your samples together</h3>
        <p class="typo-body">
          Visualizing your samples together allows detailed comparison, not
          possible by scanning one report after another.
        </p>
      </div>
      <div class="col-full md:col-6 mt-8 md:mt-16">
        <h3 class="typo-h4 mb-4">Supports your favourite tools</h3>
        <p class="typo-body">
          MultiQC comes supports many common bioinformatics tools out of the
          box. If you're missing something, just create an issue on GitHub to
          request it - if you have an example log file it's usually pretty fast.
        </p>
      </div>
      <div class="col-full md:col-6 mt-8 md:mt-16">
        <h3 class="typo-h4 mb-4">Extensible and documented</h3>
        <p class="typo-body">
          Want to use this to do something fancy? MultiQC is structured to allow
          easy extension and customisation with plugin hooks, a submodule
          framework and simple templating. Everything is well documented, with
          step by step instructions for writing your new tool.
        </p>
      </div>
    </div>
  </div>
  <div class="container-md pb-20 md:py-20">
    <div class="row justify-center text-center">
      <div class="col-full md:col-4">
        <h3 class="flex items-center justify-center">
          <Icon name="mdi:terminal" class="mr-3 h-6 w-6 text-gray-500" />
          <span class="typo-intro">Simple installation</span>
        </h3>
      </div>
      <div class="col-full md:col-4 mt-8 md:mt-0">
        <h3 class="flex items-center justify-center">
          <Icon
            name="mdi:folder-search-outline"
            class="mr-3 h-6 w-6 text-gray-500"
          />
          <span class="typo-intro">Search any directory</span>
        </h3>
      </div>
      <div class="col-full md:col-4 mt-8 md:mt-0">
        <h3 class="flex items-center justify-center">
          <Icon name="mdi:laptop" class="mr-3 h-6 w-6 text-gray-500" />
          <span class="typo-intro">View report in a web browser</span>
        </h3>
      </div>
      <div class="col-full md:col-4 mt-8">
        <h3 class="flex items-center justify-center">
          <Icon name="bi:file-earmark-zip" class="mr-3 h-6 w-6 text-gray-500" />
          <span class="typo-intro">Zip file for easy sharing</span>
        </h3>
      </div>
      <div class="col-full md:col-4 mt-8">
        <h3 class="flex items-center justify-center">
          <Icon
            name="mdi:script-text-outline"
            class="mr-3 h-6 w-6 text-gray-500"
          />
          <span class="typo-intro">Extensible & well documented</span>
        </h3>
      </div>
    </div>
  </div>
  <div class="bg-gray-100 text-gray-900">
    <div class="container-lg py-20 text-center">
      <h2 class="typo-h3 mx-auto mb-4 max-w-5xl">
        Install from the
        <a href="https://pypi.python.org/pypi/multiqc" class="text-blue-600">
          Python Package Index</a
        >
        or
        <a
          href="https://bioconda.github.io/recipes/multiqc/README.html"
          class="text-blue-600"
        >
          Bioconda</a
        >
      </h2>
      <p class="typo-blockquote mx-auto mb-3 max-w-5xl">
        To install MultiQC, simply run
        <code
          class="text-md rounded-sm bg-gray-200 px-2 tracking-tighter text-zinc-800"
        >
          pip install multiqc</code
        >
        on the command line.
      </p>
      <p class="typo-blockquote mx-auto mb-3 max-w-5xl">
        If you use conda, you can run
        <code
          class="text-md rounded-sm bg-gray-200 px-2 tracking-tighter text-zinc-800"
        >
          conda install multiqc</code
        >
        instead.
      </p>
      <p class="typo-blockquote mx-auto mb-3 max-w-5xl">
        See the
        <a href="/docs/usage/installation" class="text-blue-600">
          installation instructions</a
        >
        for more help.
      </p>
      <div class="mt-5 flex flex-col justify-center md:flex-row lg:mt-10">
        <div class="md:mr-4">
          <Button to="/docs/" variant="secondary" size="md">
            <Icon name="mdi:book-outline" class="mr-3 h-6 w-6" />
            Documentation
          </Button>
        </div>
        <div class="mt-4 md:mt-0 md:mr-4">
          <Button
            to="https://github.com/ewels/MultiQC/"
            variant="secondary"
            size="md"
          >
            <Icon name="mdi:github" class="mr-3 h-6 w-6" />
            View on GitHub
          </Button>
        </div>
        <div class="mt-4 md:mt-0">
          <Button to="/project/multiqc/" variant="secondary" size="md">
            <Icon name="mdi:language-python" class="mr-3 h-6 w-6" />
            View on PyPI
          </Button>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
