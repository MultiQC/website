---
import NavbarMenu from "@layouts/NavbarMenu.astro";
import NavbarMenuMobile from "@layouts/NavbarMenuMobile.svelte";
import NavbarDocsNav from "@layouts/NavbarDocsNav.astro";

import { Icon } from "astro-icon";

import HeroBackgroundSrc from "/images/background.png";

const location = Astro.url;

export interface Props {
  title?: string;
  headings?: {
    text: string;
    slug: string;
    depth: number;
  }[];
  navbarItems: {
    text: string;
    slug: string;
  }[];
}

const navPages = [
  { slug: "/", text: "Home" },
  { slug: "/example-reports/", text: "Examples" },
  { slug: "/modules/", text: "Tools" },
  { slug: "/docs/", text: "Docs" },
  {
    text: "About",
    items: [
      { slug: "/plugins/", text: "Plugins" },
      { slug: "/community/", text: "Community" },
      { slug: "/logos/", text: "Logo" },
      { slug: "/citation/", text: "Citation" },
    ],
  },
];

const { title, headings = [], navbarItems = navPages } = Astro.props;

// NB: We pass the SVG icons as children to the NavbarMenuMobile component
// because we want to render at build. Svelte icons package renders on page load, gives a flicker.
// Maybe a nicer way to do this? Not sure..
---

<header class="sticky top-0 z-10" style={{ backgroundImage: `url(${HeroBackgroundSrc})` }}>
  <NavbarMenu navbarItems={navbarItems}>
    <Icon name="ph:sun-bold" class="mr-2 inline h-4 w-4 text-gray-300 dark:text-gray-600" />
    <Icon name="ph:moon-bold" class="inline h-4 w-4 text-gray-600 dark:text-gray-300" />
  </NavbarMenu>
  <NavbarMenuMobile headings={headings} navbarItems={navbarItems} location={location} client:load>
    <Icon name="ph:sun-bold" class="mr-2 inline h-4 w-4 text-gray-300 dark:text-gray-600" />
    <Icon name="ph:moon-bold" class="inline h-4 w-4 text-gray-600 dark:text-gray-300" />
  </NavbarMenuMobile>
  {Astro.url.pathname.includes("/docs/") && <NavbarDocsNav title={title} />}
</header>
